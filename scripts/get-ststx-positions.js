require('dotenv').config();
const tx = require('@stacks/transactions');
const utils = require('./utils');
const network = utils.resolveNetwork();
const BN = require('bn.js');
const fs = require("fs");

const addys = [
  'SP20JY0K64XFTAE7XZK2ZEFEA28EP249EM9VZEMP7',
  'SPNNXMY01SNT92EEK9DRRG2QW1FA256MCNBPPSRX',
  'SP2HY55JTX8P6EXY9JSRKK407MQKZ9MB9VF9X5W6R',
  'SP38XSJ91XTY6ARN2W58AKKPBJAJ0AM02W1QJ497F',
  'SP1B1GMBK7J153SA8PT5ZMNHP7ZVEAWRW2AMDGHSN',
  'SP1K573K9C0AD5QMYS73DSJXW6G2JQFDBK0EQWWH',
  'SP18P831TBGKSGMJEMJM0V29CMKJP650ZT21YJ3XX',
  'SP1CE3NQXDKCJ2KEFFGCVFA5C196S9F0RRX93HY87',
  'SP29N16Y4GQNB9B59XZ1E69M5R6EXC6RFWVRCDNVH',
  'SP33G8J6MA9663A1VNVNR21MXHXXWAQAH41V6P7NB',
  'SP1WFCF5BRNC3JMYPC2AFJMZKZ09Z4DG0ZD4NFTMT',
  'SP2N3KC4CR7CC0JP592S9RBA9GHVVD30WRA5GXE8G',
  'SP1DJWJNKREHT3YGRB09DRCYD1QKGK5DKF8V868VX',
  'SP7GS93E2RY8SSZHHVF3XDP0Y5R9RF18TYZG0M56',
  'SPF7FJ9VFSVKNWH7JWSNFTTCG3P5Z0429R38KV7S',
  'SP3VTC5TNYC9ZJ5NZ9DG4HHZP5Z21ZM5JRSF6M5MD',
  'SP2JC8J455KMFRJVH94FAWK7Y8YCN6T0FZP71ZSGV',
  'SP1A41KQWS3JZP0P9SM2ZMQH117BD415XPN5CX5CC',
  'SP3WHYBHPFABS9DKX8KAN27BACNM5PSKYZ9RMKRVW',
  'SP2BN6W873KBTM991AQ0HWEWF4R27C1SJ5QRKDKYF',
  'SP3XZM9G3FM3HEGKF9CP35JS6H2MY4BP7M5VQEPE9',
  'SP1C93FQFPCRGXYFHE805SZTMPFD037WF4QAK5JMS',
  'SP3J0Z8YSJD20TGEBE6M992CWFDG18VB0PR599VY9',
  'SP1ZJHN74VH26SPHHJB4YP6NSEYVKFZD1W0ZK5K9H',
  'SP1SKWYXRSTZ61CKVR9N8Q36N5DJYC5M4213P4WJM',
  'SP34455SJ4NJ7MCKV7CN64JJTVDP3VZPMVT54BH57',
  'SPQ94G8VMT4WJE432E1HVEXKSMGZ04KWNDVM8P9F',
  'SP3NYA0QV0QF333437ZERVRH9T0XQ24JM81K36YC4',
  'SP2EDRYCPGTS32HZAGWV54RAVA2GTW0WPBP4HGCXR',
  'SPRHAMZJ7KN89SPGQXX6702DMAWM7823G6EYXV0',
  'SP38Z2W6T5GTTQXTYNY2S7BV4AX2GNHS9BNDGRTP1',
  'SP3XD84X3PE79SHJAZCDW1V5E9EA8JSKRBPEKAEK7',
  'SP1HHSDYJ0SGAM6K2W01ZF5K7AJFKWMJNH365ZWS9',
  'SPM5BVEBYCN2Z1AR2E06A69HF1W70G7V5GZFDNPR',
  'SPWDXXNHYRRDJJ7BQW6FQRF9Q070T80ZK15SP9PB',
  'SPE0N1TCKXX2YSPT042H3X3TR1KV76Y67P22C342',
  'SP331R3MQE82TBWV5R4WGZAD6FRDBN6S5ZN635CG2',
  'SP3P1TCXN3FP3V79YWXC49F5X2HYKS39CMCP5FEHN',
  'SP1E8A3T3AW2HRFB5FXMYWB2DC0TSC6H1EGTHND1W',
  'SP1Y90PSKC1M9K8FHAFW4ZEZM7PABEZ97Z6D26KMT',
  'SP25SF2MPZZS8Q20QA3VTYJXTHAHCRNM5MSZYDNB0',
  'SP32ZYEZGWHHFQ5RX2WMFVDXR77C5WWQP4EK7E6HC',
  'SP2ZNGJ85ENDY6QRHQ5P2D4FXKGZWCKTB2T0Z55KS',
  'SPQJN9008GBDXCPVS2CZSPXAPYV8251GZX1GX64R',
  'SP02A6KK9V9M4ZK6YVNVGJ5T2954JWMF2P7SNKNT',
  'SP2FA1H3K9FMY2CQ80WWT2JYMHZ5Z2B810AT41APW',
  'SP2855G3MZ3WFS5P0NRK098T1DKQ3QH5MVJ14P70P',
  'SP6Y9FQ6HE0HZ4G5XVT9PG0XZJJM2WWN0SXCY8YV',
  'SP3XMSJSV1TYRP69PAC0751P483QZ3E17R5GTV4CX',
  'SPE0N1TCKXX2YSPT042H3X3TR1KV76Y67P22C342',
  'SP3G9BMCJ0858Y68MM35R6HA0WAZDNYXWZBN4RYK1',
  'SP208XD20NAHGXA2KE0442F9F03GY23MHEBC60C2K',
  'SP1997REHPBDBRRWRHCTF693SHS0TDEA6V84TKYZV',
  'SP14XR55HNAXZ3KBE8Q46YD1RSC8EP5S63MF5GS2F',
  'SP19WSDJWTH4CW3YG554XS5CAXJJGAN83P8CFZ4K1',
  'SP266WHN5CGFEJAE8JV22QT2M7ZVS32AZ0GZWC1CN',
  'SP1XY983C1MEXM83MGNJC2JAAEGYVYZY5BYW5KS4K',
  'SP2VG7S0R4Z8PYNYCAQ04HCBX1MH75VT11VXCWQ6G',
  'SPRHAMZJ7KN89SPGQXX6702DMAWM7823G6EYXV0',
  'SP27GZVSSF7SDQZNB53GBTV8XB3H4K8QK18574G45',
  'SP2ZNGJ85ENDY6QRHQ5P2D4FXKGZWCKTB2T0Z55KS',
  'SP26A8HH1ZJWVJ044RW6S37AR573GNHJFDRRXWKD3',
  'SP2ABK7FZ008KS4Z0KS7ATX6N5AMW0Y3SDF3J21QP',
  'SP3XYP0HYZHKHJ96THQX8AV7TQYJWMF8PP30K0RX5',
  'SP1KBVBP3AZP7YA968Y3G14A17P9XXFPBPEVF5EG9',
  'SP3VCX5NFQ8VCHFS9M6N40ZJNVTRT4HZ62WFH5C4Q',
  'SP2XWGZ4XNGX3CBMJ60WB8WY5WWCBXAY21M80WT2Y',
  'SP1K13H9EWJPDBAVFHYQT7CN5N2TH5B7VN2R4WQW2',
  'SP3B8W1S6YE0Y46VSSF1MFEVCATPN9HHQ9VPVSBD8',
  'SP3W6GYEFPV6T8HSWHBX48XWB49779W56RGHZ36W5',
  'SP31A0B5K60KHWM3S3JD0B47TG3R43PT1KRV7V53B',
  'SP3M6D6M2BS7FNEFV111ZF6WQYATNJZ89Q7MXSPAE',
  'SP2ZCJT4SNB1D2WP539VGY4XH1DVH54NJTRH16PM1',
  'SPWAWSHE24QJZ5236NB14S9QX5M9VMP2ESVYRPMQ',
  'SPRA6FK6C5N1Z7G61N77YWTN2C13GEX9NXQ23MX9',
  'SP38GBVK5HEJ0MBH4CRJ9HQEW86HX0H9AP1HZ3SVZ',
  'SP3RW6BW9F5STYG2K8XS5EP5PM33E0DNQT4XEG864',
  'SPPFQ9P16QHT69TNKZA8Q2XZE49ZE2GHS87DWZZT',
  'SP284CQ2DP9XTXTDQNA8VZ81MPWB8NQB8WQ7GJ6QD',
  'SP249H1JFV31H5ZXP4AAQ137HPCQSQ5D37WMQJ4T5',
  'SP0AY7B7GKT6RWYEBVYVJTY5BS3FTJ434T6VPX5X',
  'SP1NGMS9Z48PRXFAG2MKBSP0PWERF07C0KV9SPJ66',
  'SP1EKDMMG508FY96RSEQ1EFGGZ6J8T8DCDPAM12HS',
  'SP3M6D6M2BS7FNEFV111ZF6WQYATNJZ89Q7MXSPAE',
  'SP20JY0K64XFTAE7XZK2ZEFEA28EP249EM9VZEMP7',
  'SP3TZF64TY080GVMZRT4Z87E383Q8EAKZ5W67FCNY',
  'SP3WHYBHPFABS9DKX8KAN27BACNM5PSKYZ9RMKRVW',
  'SP1MKKX1CDRYNRGSA1E1BE4C2Q63FK27K5ZWMATYE',
  'SP3RW6BW9F5STYG2K8XS5EP5PM33E0DNQT4XEG864',
  'SP129BVWPY2JQV0HZMGHD201GSWVM6S6MD1JWWGNV',
  'SP3RBMGTRD92F0S8DTDJ4FVP3D76SM4A27EV93106',
  'SPMQAMQP7SD25HRENNHHRK38PY5M2AE6SWVZVY56',
  'SP7QXF69DV4B5TV0GJGJFED2JBRED62BAX24R086',
  'SP3RY185H0R8TNX4PGRYFZ07AV001N23N1FJX9MEE',
  'SP1ZJHN74VH26SPHHJB4YP6NSEYVKFZD1W0ZK5K9H',
  'SP3XYP0HYZHKHJ96THQX8AV7TQYJWMF8PP30K0RX5',
  'SP1FRV07JWJCK8EJ37GM5SP92C9FXR5AND211HQC3',
  'SP7QQ9DV0DMV7YW4HR713MKBWADVA0BFC2J65PJT',
  'SP2X0ZM1XEDJVXSGTBFRD8NZBXE5WFBX6CJVF517H',
  'SPFKVR1SV2JD3YTE1G3V1JDD8MZTS17A76JSGNV3',
  'SP3FYANEPQWPMB6AC6QF65Y78X2HRAE1YKTFA4P0A',
  'SP1KBVBP3AZP7YA968Y3G14A17P9XXFPBPEVF5EG9',
  'SP2QPKZPPEBZ7ZB7E558TTW15X75S9VDHC09M9SJF',
  'SP3G9PTDQ03M7DM10HJXAAJWKFY0GED64690PH2RS',
  'ST1NDNEA0KNVC339QT4K7RJED9DHAD43YHGY9HHEX',
  'SPASD4TMZ7X1MC1D9T2WVS06KYACQS34Q5NGNZCJ',
  'SP259VQGHWJXZS8T9Q8YXK248FTWNA3AGBJFX0P6N',
  'SP29T11N6X6RRTJVJ6WV11EP6E1JW1G9YWMEXE89W',
  'SPZ7ZY296Y70AF72XG8H7V7M9WHRDYVCW8P6R60C',
  'SP20JY0K64XFTAE7XZK2ZEFEA28EP249EM9VZEMP7',
  'SP3JC3EKSBWF35EAJN5FXAMRHMG0XAV6TPQYJME1T',
  'SP3EMKWJWW9V54X1MGAPDPNBERHRDHG0NM2RREPYW',
  'SP110XV6K7S18PBPJRY3MES2NQ1WHW7D4GE2CKKEM',
  'SPQWKZ3MZ8AWJF0J230JBWKF273S6WKH1WS17Y2B',
  'SP3ZWRT7RFSH95SM7N30HAKPW0JW4EW1E591W1WN9',
  'SP380ANQR0PHRGXQWHN7CYMKC8KSJS2MDBZA4EE7S',
  'SPWC45P8JQP1VG9NDNPJ6ZXPVZ4XXGK06GXR5XN3',
  'SP3SF0PSD7KYVJQPKKRBYJFF7NENGFHZSBVHM3B27',
  'SP1RMDP4F4D5TQ0WX3WAB63Z4ECF5BB3QJKCV9GPY',
  'SP2RTTZSAT92NNPSDF2V94XF8MXDTQKTK12JK5SM0',
  'SP1JQAR2CJ3YE6T1PZSJBDQRWPCN9P0G6Y59XGR5E',
  'SP1K7RR1HEN2TD6Q9NYTECYSC11JDQ7R4GB1HSAHX',
  'SP1K7RR1HEN2TD6Q9NYTECYSC11JDQ7R4GB1HSAHX',
  'SP2VNFW9MQ96Y0952V441X8QWHPRTPS5GD43F7V4W',
  'SP3284VKS9EM88J4YRQFC3HHF4ZJ4ZTYFRQHH8ZM4',
  'SPKGS0Y412RTY88A4A8S1XF8EEPRM3BVJ4FJ8GYP',
  'SP26C83VQ7NS9B0H9K54BF6XF77PTRXP49F78ATCW',
  'SP63Y8J6MMVCVCEMP3AVHX7DTF2NXMTFP00S3ZJV',
  'SPC1X4TT88HEBKZC7JSC8Y7EM0NTX0VHMTEBNGT7',
  'SP2WAEP0RCPRV9A73NKESPR7FQ1P5KBJ0QPD1B20M',
  'SPKWD18XA6HDQPDXFJXRXW9QVGSQVX50PMN21BQV',
  'SP3JNPKA8T486ZWPSDEKY42XPBNDQMVW6K84QHRY5',
  'SPFN4V38J3E166KNW11SJHCECH0TEX2N6Z59XK13',
  'SPF7Y6JJHA7S8KSBWB0ZJJAKQFGMMJ759EDH8KPT',
  'SP1SE73VJ07WQSZSFJ1QP3SX7TVRPVJGYP0S89WWH',
  'SP3E3FWG7HCZ0ZQANBY0EB5PV2RXMQG18NG08MGW9',
  'SPTXCHZTNRND5G0BQ7BAEZ47PARG0W04YGFHMPDV',
  'SPDH4MRBTPA7TY969XX57HB0EZJSGTTHP5ZBTAPH',
  'SP2Q5WHA9NAGWQV500HSV93SEG8PJDNC6FAH88EP4',
  'SP3TRCJVPF49G54FTE45GZ5A9DVA6SCTVEP3DQSQG',
  'SP3FEMRF8WWN9WV3KNG6NDGEVSW23XBAXBFBZ93MA',
  'SP3549W708KFJ0C6PEQHBZSCJRN8B1AR009GEKAGJ',
  'SP34AB3GE04JF5YY1S6ZNF99QFKNY218J737G85G3',
  'SP380WYDKAB86C0WPK6FZFRCB3DDZTWKETDWQ9T54',
  'SPBY4HSEJ3N8Q54JFJ7VFDC5TVMDN1NYWBR20N5A',
  'SP1M4S6VV1NN03N95C97SGWRCRF55CYCXJCJ8JHG9',
  'SP39TAEWH0DYMK8DZ00D61DMA4D4N544HVGQHVJR7',
  'SP3Y8BZ5RVGP11MEBCF6NSEQJ31YGAEKPQ85H8156',
  'SP3Z2E62SMSDFE7N25JC6V6G2X9QKEV350AACZQCG',
  'SP3WV7W60ATCSRAY8941JT789A0DYVFQWNT1N6NYH',
  'SP1CMFJW9J8WN7R2XJ26AC90AARGW68R1CWNYDANC',
  'SP1CMFJW9J8WN7R2XJ26AC90AARGW68R1CWNYDANC',
  'SP3DCRRX4HKZA33D0VC55QBA3PQ15DW3R39N0XR17',
  'SP3JNPKA8T486ZWPSDEKY42XPBNDQMVW6K84QHRY5',
  'SP1XF1JCS0BJFNX3Q7XHVPNVQR8XCBPCTFB1AXQDD',
  'SP380ANQR0PHRGXQWHN7CYMKC8KSJS2MDBZA4EE7S',
  'SP1YFBFQYPXTD0GS180M868YVZ8BXKZYK06QC0WZC',
  'SP21F9X20AXC2KFVSGXHZVZHQ1T7PR2P7WAYYB78E',
  'SP3MTP3P24QF1PE3DYVHAXVWF6VJTCD498NPKWAWP',
  'SP11W53JZFRFGB58Y8GJAZW48YAHM9JM27MSJ863W',
  'SP28S4B855DXCVXE58V83EMS23QM3R7RJ3BQA6EHY',
  'SP1YFBFQYPXTD0GS180M868YVZ8BXKZYK06QC0WZC',
  'SPPZTRYYGZWA7BY3YX6NSXFE87CWJE0FFVEXCQ9Y',
  'SP3ZWRT7RFSH95SM7N30HAKPW0JW4EW1E591W1WN9',
  'SP3HQ69JM9MSWAKGJ07HRQ5PAV1XEFE2ATV51PFMZ',
  'SP2YYG5F3GKC2RWCQGFMSRAKS2BY5RCNZZMKV7BWD',
  'SP3K6KY0GYGPATJDY4RKX0FNE8TQWHCXJBQ2NZWVG',
  'SP11XX0PCQVE313J2X3TAHGQ9T1T0NMMEN4XMHABQ',
  'SP2V3AADA3BJ2P6GY2KR8K5KZ8B1EZ5P2Y6FGP0EJ',
  'SP2H0DN9ME86K8V5JGFT09ECN35QW6KWBZXT3W0XZ',
  'SPZJJZNRXD1FHM5YAGGFZSB03PTRBWNNKRE0Y4RD',
  'SP3N8ZJBY5R6V4QNW7GR7GA6VG73WAYXAFPEMF69X',
  'SP259NNCXTF8T3MM6GN7SFX30F3WVSW72FR20GJJ3',
  'SP259NNCXTF8T3MM6GN7SFX30F3WVSW72FR20GJJ3',
  'SPV9SHG0KNS3NFBBKFFN8A8RYZMKZGKNMBCPDH0S',
  'SP2JVVNXTQATD2P9QGEN6MN7ZSTBGY4ZZ8EWJ2ZN2',
  'SP33P2035Y1R497ZBPYQQH47Z0GV2F325GZS272WR',
  'SP3YS47N9JQSP57R3CHNW28M0GD3D067YCAP4ZB7J',
  'SP3FJAEXTFSMF67E2ZZP586PCSHB6DEQDTW0YBZYR',
  'SP3ZW40EN0XN0JVEKJ20656MSDV1JB4Z80DG6FEK3',
  'SP2EZBRH2T5A4TPFFTDK48CHR0WG95YZZA4HC1TJE',
  'SP3V1JNFDVZJ3MCF7B8VHRR94VZ0F9ES3AYR8MRKQ',
  'SP2FPXA528MR3M9EGN758JJV976S1FQY9T4ZN666B',
  'SP7T6J7JRKSAZH02G283M8GNCXT96BACHDRQ6B4C',
  'SP3C00JQWPG67FX6G05HHDB3E786XGE8AQQCP4X00',
  'SP1AF7TH2DDN2XCFFEVXKF15VVYW2X68CDQW3G4MK',
  'SPJYG3K6ASHD9JGFAHKNCH5A9DYFNPET8P7XGX14',
  'SP2V3AADA3BJ2P6GY2KR8K5KZ8B1EZ5P2Y6FGP0EJ',
  'SP39WTKHH436QV6BTS9EKCW64CFT2AYV7XMVTCY0N',
  'SP2J6384FJ13WPHVCPT010F3VJG9HV56RRG9XS65G',
  'SP2S7Y7BMX7Y73FHV3SV9W1EE63EQ98BE95PZ4C4E',
  'SP152VTRCJF968FXC3W7YPNJ4AC25K88KJ0VN5QA2',
  'SP1G18KGVMP2RF5S2387DBC4VRZGK2T9ETMMVT7BB',
  'SP34GFA8VVXNJSQ87350TAKESD0FETYJVX83R759Z',
  'SP1YD37JV9TG74EM8TSBSSBYYMNMWE6ANBSF2PQ1K',
  'SP1WQFZWWKADDEF1B6Z9T30QHWNY3VR9X0MZC63G4',
  'SP1BJKWZ618EJHDRC4RV6XXE72MZCKDAEWDMAJATZ',
  'SP13QC2G49PXXA84H083Y1PMFS2PGXM583HQ8TQ9F',
  'SP1JP6FD3CBJKQG3KEGYR5SDV3VS5TPKGCR3D05WC',
  'SP3M6D6M2BS7FNEFV111ZF6WQYATNJZ89Q7MXSPAE',
  'SP3CGHCBFBRAZ3KSY50VBQNM549KZ4Z6KWMG3DFTD',
  'SP27Z117BT8GB92V63MN4H84P7BHJXZB6R7SY3W4J',
  'SPNBYP1MY456K29804XHT4PY5QKMSXNRBHGADTDY',
  'SP1FV4FZ8D32S7GKYRPFWK6YHRJE5BZEYKABK72Q3',
  'SP3WHYBHPFABS9DKX8KAN27BACNM5PSKYZ9RMKRVW',
  'SPC7M5BS09G0MEX6FZ4WAKK6JFZ4AVZMZB8FXDEP',
  'SPXQS1T1T2BKGSHH8H75PVFEY0R1X39F0B3MQWTJ',
  'SP1W577DNF1JZJ6MXC4CTT7675KBNBS8XNSR33R1S',
  'SPY9K49VE06A66ZXJ3S2ZMJXYJ8HQ08J4MAR4A3R',
  'SP3N0TH3N7BDG4WBSYV6FE2ASSAPEGWK47EEWD9TV',
  'SP3AA5MRN4D0ZH4Z0P5MPB6WEW0PGQRM3EPK3R67X',
  'SP38S97PT13ZETZKTRDXF7QX5JQKZNKQBC7101E87',
  'SP1S55CA3CHVV6JQRG0610FM9XA1ZQ1DXKH7BNVJX',
  'SP3ZTYBN9PYVVFKBEFVSZ2BEGK3HXRNVP6FDG79WV',
  'SPEDKJ6JTRYAT2PK5JAC8PNJKVPZGYZPHXJV2ZS3',
  'SP36RBBMH2KTHE9KW799S7FAVSXW3CHP7HRY4H59E',
  'SP292V4NVXFG3NKMFKJFPZCN3SMY5HT9NY392Z8QA',
  'SP39ES166CA938Y2S0AGCFC0D3BSJ81JRRAP0HD5Y',
  'SPJT8G4DA24ZDF35WMY5FZEQ9YJNK38DBN2D48QH'
];

async function getStStx(address) {
  const execTx = await tx.callReadOnlyFunction({
    contractAddress: 'SP4SZE494VC2YC5JYG7AYFQ44F5Q4PYV7DVMDPBG',
    contractName: 'block-info-v1',
    functionName: 'get-user-ststx-at-block',
    functionArgs: [
      tx.standardPrincipalCV(address),
      tx.uintCV(133737)
    ],
    senderAddress: 'SP000000000000000000002Q6VF78',
    network
  });

  const data = tx.cvToJSON(execTx)['value'];
  console.log(address + ',' + data['lp-balance']['value'] + ',' + data['ststx-balance']['value']);

  return execTx;
}

async function asyncForEach(array, callback) {
  for (let index = 0; index < array.length; index++) {
    await callback(array[index], index, array);
  }
}

asyncForEach(addys, async (addy) => {
  await getStStx(addy);
});
